{
    "openapi": "3.0.0",
    "info": {
        "title": "Carsharing",
        "description": "Документация к API системы каршеринга",
        "version": "1.0"
    },
    "paths": {
        "/api/bills/set/status": {
            "get": {
                "tags": [
                    "Счета"
                ],
                "summary": "Изменить статус счета",
                "description": "Изменяет статус выбранного счета",
                "operationId": "639f9a957a1bf73f19cbe20f84a6a0eb",
                "parameters": [
                    {
                        "name": "billId",
                        "in": "query",
                        "description": "Идентификатор Счета",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Статус",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "blocked"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Возвращает измененный счет"
                    },
                    "400": {
                        "description": "Переданный статус неверен",
                        "content": {
                            "application/json": {
                                "schema": {},
                                "example": {
                                    "error": "Incorrect status 'qwerty'"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе или произошла ошибка при изменении статуса счета",
                        "content": {
                            "application/json": {
                                "schema": {},
                                "example": {
                                    "error": "Bill already has 'open' status"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rents/get": {
            "get": {
                "tags": [
                    "Аренда"
                ],
                "summary": "Получить аренду",
                "description": "Получить запись об аренде по идентификатору",
                "operationId": "0252e7ae3cfdca3d28bc8d306a96d6b2",
                "parameters": [
                    {
                        "name": "rentId",
                        "in": "query",
                        "description": "Идентификатор аренды",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Возвращает запись аренды"
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе"
                    }
                }
            }
        },
        "/api/rents/get/status": {
            "get": {
                "tags": [
                    "Аренда"
                ],
                "summary": "Получить статус аренды",
                "description": "Получить статус аренды по идентификатору",
                "operationId": "26369acea843594aa322ef21226b280d",
                "parameters": [
                    {
                        "name": "rentId",
                        "in": "query",
                        "description": "Идентификатор аренды",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Возвращает статус аренды"
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе"
                    }
                }
            }
        },
        "/api/rents/get/open": {
            "get": {
                "tags": [
                    "Аренда"
                ],
                "summary": "Получить открытые аренды",
                "description": "Получить аренды со статусом 'открытая'",
                "operationId": "b8721de47a711a5660598649762e6f69",
                "responses": {
                    "200": {
                        "description": "Возвращает список аренд"
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе"
                    }
                }
            }
        },
        "/api/rents/get/close": {
            "get": {
                "tags": [
                    "Аренда"
                ],
                "summary": "Получить закрытые аренды",
                "description": "Получить аренды со статусом 'закрытая'",
                "operationId": "d138eae810b0670b91e50cb7896163c8",
                "responses": {
                    "200": {
                        "description": "Возвращает список аренд"
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе"
                    }
                }
            }
        },
        "/api/rents/open": {
            "get": {
                "tags": [
                    "Аренда"
                ],
                "summary": "Открыть аренду",
                "description": "Взять машину в аренду для заданного пользователя и открыть аренду",
                "operationId": "ada34ef0ba5f3776e661a70dc40c244b",
                "parameters": [
                    {
                        "name": "renterId",
                        "in": "query",
                        "description": "Идентификатор пользователя",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    },
                    {
                        "name": "vehicleId",
                        "in": "query",
                        "description": "Идентификатор ТС",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Возвращает запись созданной аренды"
                    },
                    "403": {
                        "description": "Статус пользователя или ТС не позволяет открыть аренду"
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе"
                    }
                }
            }
        },
        "/api/rents/close": {
            "get": {
                "tags": [
                    "Аренда"
                ],
                "summary": "Закрыть аренду",
                "description": "Закрыть аренду по идентификатору",
                "operationId": "dec0209c65dff4087e6583b60e6839d0",
                "parameters": [
                    {
                        "name": "rentId",
                        "in": "query",
                        "description": "Идентификатор аренды",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Возвращает запись закрытой аренды"
                    },
                    "403": {
                        "description": "Статус аренды или статус ТС не позволяет закрыть аренду"
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе"
                    }
                }
            }
        },
        "/api/renters/set/defaultbill": {
            "get": {
                "tags": [
                    "Пользователи"
                ],
                "summary": "Изменить счет по умолчанию",
                "description": "Изменяет выбранный по умолчанию счет для конкретного пользователя",
                "operationId": "529b241002479562e3320b8469ae3949",
                "parameters": [
                    {
                        "name": "renterId",
                        "in": "query",
                        "description": "Идентификатор пользователя",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    },
                    {
                        "name": "billId",
                        "in": "query",
                        "description": "Идентификатор счета",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Возвращает пользователя"
                    },
                    "400": {
                        "description": "Статус счета не позволяет выбрать его основным",
                        "content": {
                            "application/json": {
                                "schema": {},
                                "example": {
                                    "error": "Bill with status 'blocked' cannot be selected as the default bill"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Неверно переданы данные в запросе или произошла ошибка при изменении статуса счета",
                        "content": {
                            "application/json": {
                                "schema": {},
                                "example": {
                                    "error": "Renter has not bill with id '1'"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Bill/SetStatusRequest": {
                "properties": {
                    "billId": {
                        "description": "Идентификатор Счета",
                        "type": "integer",
                        "example": "1"
                    },
                    "status": {
                        "description": "Статус",
                        "type": "string",
                        "example": "open"
                    }
                },
                "type": "object"
            },
            "Rent/CloseRequest": {
                "properties": {
                    "rentId": {
                        "description": "Идентификатор аренды",
                        "type": "integer",
                        "example": "1"
                    }
                },
                "type": "object"
            },
            "Rent/GetRequest": {
                "properties": {
                    "rentId": {
                        "description": "Идентификатор аренды",
                        "type": "integer",
                        "example": "1"
                    }
                },
                "type": "object"
            },
            "Rent/OpenRequest": {
                "properties": {
                    "renterId": {
                        "description": "Идентификатор пользователя",
                        "type": "integer",
                        "example": "1"
                    },
                    "vehicleId": {
                        "description": "Идентификатор ТС",
                        "type": "integer",
                        "example": "1"
                    }
                },
                "type": "object"
            },
            "Bill/SetDefaultBillRequest": {
                "properties": {
                    "renterId": {
                        "description": "Идентификатор польщователя",
                        "type": "integer",
                        "example": "1"
                    },
                    "billId": {
                        "description": "Идентификатор счета",
                        "type": "integer",
                        "example": "1"
                    }
                },
                "type": "object"
            }
        }
    }
}